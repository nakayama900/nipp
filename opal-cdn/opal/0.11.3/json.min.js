Opal.modules.json=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}var $nesting=(Opal.top,[]),nil=Opal.nil,$module=(Opal.breaker,Opal.slice,Opal.module),$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy,$hash2=Opal.hash2;return Opal.add_stubs(["$raise","$new","$push","$[]=","$-","$[]","$create_id","$json_create","$const_get","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function($base,$parent_nesting){function $parse(source){try{return JSON.parse(source)}catch(e){self.$raise(Opal.const_get_qualified(Opal.const_get_relative($nesting,"JSON"),"ParserError"),e.message)}}function to_opal(value,options){var klass,arr,hash,i,ii,k;switch(typeof value){case"string":return value;case"number":return value;case"boolean":return!!value;case"null":return nil;case"object":if(!value)return nil;if(value.$$is_array){for(arr=options.array_class.$new(),i=0,ii=value.length;ii>i;i++)arr.$push(to_opal(value[i],options));return arr}hash=options.object_class.$new();for(k in value)$hasOwn.call(value,k)&&($writer=[k,to_opal(value[k],options)],$send(hash,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]);return options.parse||(klass=hash["$[]"](Opal.const_get_relative($nesting,"JSON").$create_id()))==nil?hash:Opal.const_get_qualified("::","Object").$const_get(klass).$json_create(hash)}}var $JSON,TMP_JSON_$$_1,TMP_JSON_parse_2,TMP_JSON_parse$B_3,TMP_JSON_load_4,TMP_JSON_from_object_5,TMP_JSON_generate_6,TMP_JSON_dump_7,self=$JSON=$module($base,"JSON"),$nesting=(self.$$proto,[self].concat($parent_nesting)),$writer=nil;!function($base,$super,$parent_nesting){function $JSONError(){}{var self=$JSONError=$klass($base,$super,"JSONError",$JSONError);self.$$proto,[self].concat($parent_nesting)}return nil}($nesting[0],Opal.const_get_relative($nesting,"StandardError"),$nesting),function($base,$super,$parent_nesting){function $ParserError(){}{var self=$ParserError=$klass($base,$super,"ParserError",$ParserError);self.$$proto,[self].concat($parent_nesting)}return nil}($nesting[0],Opal.const_get_relative($nesting,"JSONError"),$nesting);var $hasOwn=Opal.hasOwnProperty;!function(self,$parent_nesting){self.$$proto,[self].concat($parent_nesting);return self.$attr_accessor("create_id")}(Opal.get_singleton_class(self),$nesting),$writer=["json_class"],$send(self,"create_id=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],Opal.defs(self,"$[]",TMP_JSON_$$_1=function(value,options){var self=this;return null==options&&(options=$hash2([],{})),$truthy(Opal.const_get_relative($nesting,"String")["$==="](value))?self.$parse(value,options):self.$generate(value,options)},TMP_JSON_$$_1.$$arity=-2),Opal.defs(self,"$parse",TMP_JSON_parse_2=function(source,options){var self=this;return null==options&&(options=$hash2([],{})),self.$from_object($parse(source),options.$merge($hash2(["parse"],{parse:!0})))},TMP_JSON_parse_2.$$arity=-2),Opal.defs(self,"$parse!",TMP_JSON_parse$B_3=function(source,options){var self=this;return null==options&&(options=$hash2([],{})),self.$parse(source,options)},TMP_JSON_parse$B_3.$$arity=-2),Opal.defs(self,"$load",TMP_JSON_load_4=function(source,options){var self=this;return null==options&&(options=$hash2([],{})),self.$from_object($parse(source),options)},TMP_JSON_load_4.$$arity=-2),Opal.defs(self,"$from_object",TMP_JSON_from_object_5=function(js_object,options){var $a,$writer=nil;return null==options&&(options=$hash2([],{})),$truthy($a=options["$[]"]("object_class"))?$a:($writer=["object_class",Opal.const_get_relative($nesting,"Hash")],$send(options,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$truthy($a=options["$[]"]("array_class"))?$a:($writer=["array_class",Opal.const_get_relative($nesting,"Array")],$send(options,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),to_opal(js_object,options.$$smap)},TMP_JSON_from_object_5.$$arity=-2),Opal.defs(self,"$generate",TMP_JSON_generate_6=function(obj,options){return null==options&&(options=$hash2([],{})),obj.$to_json(options)},TMP_JSON_generate_6.$$arity=-2),Opal.defs(self,"$dump",TMP_JSON_dump_7=function(obj,io,limit){var self=this,string=nil;return null==io&&(io=nil),null==limit&&(limit=nil),string=self.$generate(obj),$truthy(io)?($truthy(io["$responds_to?"]("to_io"))&&(io=io.$to_io()),io.$write(string),io):string},TMP_JSON_dump_7.$$arity=-2)}($nesting[0],$nesting),function($base,$super,$parent_nesting){function $Object(){}{var TMP_Object_to_json_8,self=$Object=$klass($base,$super,"Object",$Object);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Object_to_json_8=function(){var self=this;return self.$to_s().$to_json()},TMP_Object_to_json_8.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$parent_nesting){{var $Enumerable,TMP_Enumerable_to_json_9,self=$Enumerable=$module($base,"Enumerable");self.$$proto,[self].concat($parent_nesting)}Opal.defn(self,"$to_json",TMP_Enumerable_to_json_9=function(){var self=this;return self.$to_a().$to_json()},TMP_Enumerable_to_json_9.$$arity=0)}($nesting[0],$nesting),function($base,$super,$parent_nesting){function $Array(){}{var TMP_Array_to_json_10,self=$Array=$klass($base,$super,"Array",$Array);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Array_to_json_10=function(){for(var self=this,result=[],i=0,length=self.length;length>i;i++)result.push(self[i].$to_json());return"["+result.join(", ")+"]"},TMP_Array_to_json_10.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $Boolean(){}{var TMP_Boolean_to_json_11,self=$Boolean=$klass($base,$super,"Boolean",$Boolean);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Boolean_to_json_11=function(){var self=this;return 1==self?"true":"false"},TMP_Boolean_to_json_11.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $Hash(){}{var TMP_Hash_to_json_12,self=$Hash=$klass($base,$super,"Hash",$Hash);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Hash_to_json_12=function(){for(var key,value,self=this,result=[],i=0,keys=self.$$keys,length=keys.length;length>i;i++)key=keys[i],key.$$is_string?value=self.$$smap[key]:(value=key.value,key=key.key),result.push(key.$to_s().$to_json()+":"+value.$to_json());return"{"+result.join(", ")+"}"},TMP_Hash_to_json_12.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $NilClass(){}{var TMP_NilClass_to_json_13,self=$NilClass=$klass($base,$super,"NilClass",$NilClass);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_NilClass_to_json_13=function(){return"null"},TMP_NilClass_to_json_13.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $Numeric(){}{var TMP_Numeric_to_json_14,self=$Numeric=$klass($base,$super,"Numeric",$Numeric);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Numeric_to_json_14=function(){var self=this;return self.toString()},TMP_Numeric_to_json_14.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $String(){}{var self=$String=$klass($base,$super,"String",$String);self.$$proto,[self].concat($parent_nesting)}return Opal.alias(self,"to_json","inspect")}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $Time(){}{var TMP_Time_to_json_15,self=$Time=$klass($base,$super,"Time",$Time);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Time_to_json_15=function(){var self=this;return self.$strftime("%FT%T%z").$to_json()},TMP_Time_to_json_15.$$arity=0),nil&&"to_json"}($nesting[0],null,$nesting),function($base,$super,$parent_nesting){function $Date(){}{var TMP_Date_to_json_16,TMP_Date_as_json_17,self=$Date=$klass($base,$super,"Date",$Date);self.$$proto,[self].concat($parent_nesting)}return Opal.defn(self,"$to_json",TMP_Date_to_json_16=function(){var self=this;return self.$to_s().$to_json()},TMP_Date_to_json_16.$$arity=0),Opal.defn(self,"$as_json",TMP_Date_as_json_17=function(){var self=this;return self.$to_s()},TMP_Date_as_json_17.$$arity=0),nil&&"as_json"}($nesting[0],null,$nesting)};